rules:

  - rule: Provide_game_info
    steps:
      - intent: game_info
      - action: game_info_form
      - active_loop: game_info_form
      - slot_was_set:
          - requested_slot: game
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: action_provide_game_info

  - rule: Provide_publishers_games
    steps:
      - intent: get_publisher_games
      - action: get_publisher_games_form
      - active_loop: get_publisher_games_form
      - slot_was_set:
          - requested_slot: publisher
      - slot_was_set:
          - requested_slot: null
      - active_loop: null
      - action: action_provide_publisher_games

  - rule: get_genres
    steps:
      - intent: get_genres
      - active_loop: null
      - action: action_provide_genres

  - rule: get_publishers
    steps:
      - intent: get_publishers
      - active_loop: null
      - action: action_provide_publishers
  
  - rule: activate_detailed_recommendation_form
    steps:
      - intent: ask_recommendation
      - action: detailed_recommendation_form
      - active_loop: detailed_recommendation_form
      - slot_was_set:
          - requested_slot: genre
      - slot_was_set:
          - requested_slot: publisher
      - active_loop: null
      - action: action_provide_recommendation

  - rule: activate_termination
    condition: 
      - active_loop: detailed_recommendation_form
    steps: 
      - intent: terminate
      - action: utter_ask_continue

  - rule: deactivate_detailed_recommendation_form
    condition: 
      - active_loop: detailed_recommendation_form
    steps:
      - action: utter_ask_continue 
      - intent: positive
      - action: action_deactivate_loop
      - active_loop: null
      - action: utter_terminate_form
      - action: action_reset_slots

  - rule: handle_termination_interruption
    condition: 
      - active_loop: detailed_recommendation_form
    steps:
      - action: utter_ask_continue
      - intent: negative
      - action: action_resume_form

  - rule: start
    steps:
      - intent: start
      - action: utter_iamabot

  - rule: Greet the user
    steps:
      - intent: greet
      - action: utter_greet

  - rule: Say goodbye anytime the user says goodbye
    steps:
    - intent: goodbye
    - action: utter_goodbye

  - rule: Say 'I am a bot' anytime the user challenges
    steps:
      - intent: bot_challenge
      - action: utter_iamabot