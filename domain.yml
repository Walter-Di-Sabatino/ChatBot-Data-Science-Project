version: "3.1"

intents:
  - start
  - greet
  - goodbye
  - mood_great
  - mood_unhappy
  - bot_challenge

  - get_publishers
  - get_genres
  - terminate
  - positive
  - negative

  - game_info:
      use_entities:
        - game

  - get_recommendation:
      use_entities:
        - genre

  - ask_recommendation:
      use_entities:
        - genre
        - publisher

  - get_publisher_games:
      use_entities:
        - publisher

  - genres_filter_positive:
      use_entities:
        - genre

  - genres_filter_negative

  - publishers_filter_positive:
      use_entities:
        - publisher

  - publishers_filter_negative

actions:
  - utter_iamabot
  - utter_greet
  - utter_goodbye
  - utter_did_that_help
  - utter_cheer_up
  - utter_ask_genre
  - utter_ask_continue
  - utter_ask_publisher
  - action_provide_game_info
  - action_provide_publisher_games
  - action_provide_recommendation
  - action_provide_genres 
  - action_provide_publishers
  - action_reset_slots
  - utter_terminate_form
  - action_resume_form
  - utter_default
  - validate_detailed_recommendation_form
  - utter_ask_genres_filter
  - utter_ask_publishers_filter
  - utter_no_form_in_form
  - action_re_ask_slot

entities:
  - game
  - genre
  - publisher

slots:
  genres_filter:
    type: bool
    influence_conversation: True
    mappings:
      - type: from_intent
        value: true
        intent: 
          - positive
          - genres_filter_positive
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: genres_filter
      - type: from_intent
        value: false
        intent: 
          - negative
          - genres_filter_negative
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: genres_filter

  publishers_filter:
    type: bool
    influence_conversation: True
    mappings:
      - type: from_intent
        value: true
        intent: 
          - positive
          - publishers_filter_positive
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: publishers_filter
      - type: from_intent
        value: false
        intent: 
          - negative
          - publishers_filter_negative
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: publishers_filter

  genres:
    type: list
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: genre
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: genres
          - active_loop: detailed_recommendation_form
            requested_slot: genres_filter
      - type: from_entity
        entity: genre
        value: ["NO"]
        intent: ask_recommendation

  publishers:
    type: list
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: publisher
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: publishers
          - active_loop: detailed_recommendation_form
            requested_slot: publishers_filter
          - active_loop: get_publisher_games_form
      - type: from_entity
        entity: publisher
        value: ["NO"]
        intent: ask_recommendation

  game:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: game
        conditions:
          - active_loop: game_info_form

forms:
  detailed_recommendation_form:
    required_slots:
      - genres_filter
      - genres
      - publishers_filter
      - publishers
  
  game_info_form:
    required_slots:
      - game
  
  get_publisher_games_form:
    required_slots:
      - publishers

responses:

  utter_default:
    - text: "ğŸ¤” I'm not sure what you mean. Could you be more specific?"

  utter_no_form_in_form:
    - text: "âŒ You can't start a form in another form!"

  utter_ask_genres_filter:
    - text: "ğŸ® Would you like to filter the recommendations by genres?"
    - text: "ğŸ” Should I sort the results based on genres?"
    - text: "âš™ï¸ Do you want me to apply a genres filter for these recommendations?"
    - text: "ğŸ¯ Do you prefer filtering the recommendations by specific genres?"

  utter_ask_genres:
    - text: "ğŸ® What types of games do you enjoy the most?"
    - text: "ğŸ¤” What game genres do you prefer?"
    - text: "ğŸ’¡ What are your favorite game genres?"
    - text: "ğŸ¯ Are there any specific genres or themes you particularly like in games?"

  utter_ask_publishers_filter:
    - text: "ğŸ¢ Would you like to filter the recommendations by specific publishers?"
    - text: "ğŸ” Should I apply a publishers filter to the recommendations?"
    - text: "âš™ï¸ Would you like to set a publishers filter for the recommendations?"
    - text: "ğŸ¯ Do you want to filter the recommendations by particular publishers?"

  utter_ask_publishers:
    - text: "ğŸ¢ Are there any game publishers you prefer?"
    - text: "ğŸ¤” Which game publishers do you like?"
    - text: "ğŸ’¡ Do you have any favorite publishers?"
    - text: "ğŸ¯ Are there specific publishers or studios you prefer in games?"

  utter_iamabot:
    - text: "ğŸ‘‹ Hi, I'm Rolo, a bot made to help you find the perfect games for your gaming experience!"

  utter_cheer_up:
    - text: "Here is something to cheer you up: ğŸ˜Š"
      image: "https://i.imgur.com/nGF1K8f.jpg"

  utter_did_that_help:
    - text: "ğŸ¤” Did that help you?"
    - text: "ğŸ‘ Was that useful?"
    - text: "ğŸ’¬ Do you need any more assistance?"

  utter_happy:
    - text: "ğŸ‰ Great, carry on!"
    - text: "ğŸš€ Awesome, keep going!"
    - text: "ğŸ˜Š Glad to hear that!"

  utter_ask_continue:
    - text: "âš ï¸ Are you sure you want to exit the form?"

  utter_goodbye:
    - text: "ğŸ‘‹ Bye!"
    - text: "ğŸ’– Goodbye, take care!"
    - text: "ğŸ‘‹ See you later!"

  utter_greet:
    - text: "ğŸ˜Š Hi! How are you?"
    - text: "ğŸ‘‹ Hello! How's it going?"
    - text: "ğŸ‰ Hey there! What's up?"

  utter_terminate_form:
    - text: "ğŸ›‘ Form closed. Let me know if you need more help."

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
