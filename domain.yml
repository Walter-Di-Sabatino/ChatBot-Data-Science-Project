version: "3.1"

intents:
  - start
  - greet
  - goodbye
  - mood_great
  - mood_unhappy
  - bot_challenge

  - get_publishers
  - get_genres
  - terminate
  - positive
  - negative

  - game_info:
      use_entities:
        - game

  - get_recommendation:
      use_entities:
        - genre

  - ask_recommendation:
      use_entities:
        - genre
        - publisher

  - get_publisher_games:
      use_entities:
        - publisher

  - genre_filter_positive:
      use_entities:
        - genre

  - genre_filter_negative

  - publisher_filter_positive:
      use_entities:
        - publisher

  - publisher_filter_negative

actions:
  - utter_iamabot
  - utter_greet
  - utter_goodbye
  - utter_did_that_help
  - utter_cheer_up
  - utter_ask_genre
  - utter_ask_continue
  - utter_ask_publisher
  - action_provide_game_info
  - action_provide_publisher_games
  - action_provide_recommendation
  - action_provide_genres 
  - action_provide_publishers
  - action_reset_slots
  - utter_terminate_form
  - action_resume_form
  - utter_default
  - validate_detailed_recommendation_form
  - utter_ask_genre_filter
  - utter_ask_publisher_filter
  - utter_no_form_in_form

entities:
  - game
  - genre
  - publisher

slots:
  genre_filter:
    type: bool
    influence_conversation: True
    mappings:
      - type: from_intent
        value: true
        intent: 
          - positive
          - genre_filter_positive
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: genre_filter
      - type: from_intent
        value: false
        intent: 
          - negative
          - genre_filter_negative
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: genre_filter

  publisher_filter:
    type: bool
    influence_conversation: True
    mappings:
      - type: from_intent
        value: true
        intent: 
          - positive
          - publisher_filter_positive
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: publisher_filter
      - type: from_intent
        value: false
        intent: 
          - negative
          - publisher_filter_negative
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: publisher_filter

  genre:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: genre
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: genre
          - active_loop: detailed_recommendation_form
            requested_slot: genre_filter
      - type: from_entity
        entity: genre
        value: "NO"
        intent: ask_recommendation

  publisher:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: publisher
        conditions:
          - active_loop: detailed_recommendation_form
            requested_slot: publisher
          - active_loop: detailed_recommendation_form
            requested_slot: publisher_filter
          - active_loop: get_publisher_games_form
      - type: from_entity
        entity: publisher
        value: "NO"
        intent: ask_recommendation

  game:
    type: text
    influence_conversation: true
    mappings:
      - type: from_entity
        entity: game
        conditions:
          - active_loop: game_info_form

forms:
  detailed_recommendation_form:
    required_slots:
      - genre_filter
      - genre
      - publisher_filter
      - publisher
  
  game_info_form:
    required_slots:
      - game
  
  get_publisher_games_form:
    required_slots:
      - publisher

responses:

  utter_default:
    - text: "ğŸ¤” I'm not sure what you mean. Could you be more specific?"

  utter_no_form_in_form:
    - text: "âŒ You can't start a form in another form!"

  utter_ask_genre_filter:
    - text: "ğŸ® Would you like to filter the recommendations by genre?"
    - text: "ğŸ” Should I sort the results based on genre?"
    - text: "âš™ï¸ Do you want me to apply a genre filter for this recommendation?"
    - text: "ğŸ¯ Do you prefer filtering the recommendations by a specific genre?"

  utter_ask_genre:
    - text: "ğŸ® What types of games do you enjoy the most?"
    - text: "ğŸ¤” What game genres do you prefer?"
    - text: "ğŸ’¡ What are your favorite game genres?"
    - text: "ğŸ¯ Are there any specific genres or themes you particularly like in games?"

  utter_ask_publisher_filter:
    - text: "ğŸ¢ Would you like to filter the recommendations by a specific publisher?"
    - text: "ğŸ” Should I apply a publisher filter to the recommendations?"
    - text: "âš™ï¸ Would you like to set a publisher filter for the recommendations?"
    - text: "ğŸ¯ Do you want to filter the recommendations by a particular publisher?"

  utter_ask_publisher:
    - text: "ğŸ¢ Is there a game publisher you prefer?"
    - text: "ğŸ¤” Which game publisher do you like?"
    - text: "ğŸ’¡ Do you have a favorite publisher?"
    - text: "ğŸ¯ Is there a specific publisher or studio you prefer in games?"

  utter_iamabot:
    - text: "ğŸ‘‹ Hi, I'm Rolo, a bot made to help you find the perfect games for your gaming experience!"

  utter_cheer_up:
    - text: "Here is something to cheer you up: ğŸ˜Š"
      image: "https://i.imgur.com/nGF1K8f.jpg"

  utter_did_that_help:
    - text: "ğŸ¤” Did that help you?"
    - text: "ğŸ‘ Was that useful?"
    - text: "ğŸ’¬ Do you need any more assistance?"

  utter_happy:
    - text: "ğŸ‰ Great, carry on!"
    - text: "ğŸš€ Awesome, keep going!"
    - text: "ğŸ˜Š Glad to hear that!"

  utter_ask_continue:
    - text: "âš ï¸ Are you sure you want to exit the form?"

  utter_goodbye:
    - text: "ğŸ‘‹ Bye!"
    - text: "ğŸ’– Goodbye, take care!"
    - text: "ğŸ‘‹ See you later!"

  utter_greet:
    - text: "ğŸ˜Š Hi! How are you?"
    - text: "ğŸ‘‹ Hello! How's it going?"
    - text: "ğŸ‰ Hey there! What's up?"

  utter_terminate_form:
    - text: "ğŸ›‘ Form closed. Let me know if you need more help."

session_config:
  session_expiration_time: 60
  carry_over_slots_to_new_session: true
